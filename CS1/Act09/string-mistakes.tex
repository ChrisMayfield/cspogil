% Based on Model 3 of Activity 5 - Strings by Helen Hu

\model{Common Mistakes}

\newsavebox{\programA}
\begin{lrbox}{\programA}
\begin{javalst}
String greeting = "hello world";
greeting.toUpperCase();
System.out.println(greeting);

\end{javalst}
\end{lrbox}

\newsavebox{\programB}
\begin{lrbox}{\programB}
\begin{javalst}
Scanner in = new Scanner(System.in);
String line = in.nextLine();
char letter = line.charAt(1);
System.out.println(letter);
\end{javalst}
\end{lrbox}

\vspace{-1ex}
\begin{table}[h!]
\begin{tabularx}{\linewidth}{|X|X|}
\hline
\tr Program A & \tr Program B \\
\hline
\usebox{\programA} & \usebox{\programB} \\
\hline
\multicolumn{1}{c}{\ans{\tt hello world}} &
\multicolumn{1}{c}{\ans{\tt StringIndexOutOfBoundsException}} \\[-3ex]
\end{tabularx}
\end{table}


\quest{10 min}


\Q Write the output of each program in the space under the table above.
What is the logic error you see when you run Program A?

\begin{answer}[3em]
The \str{hello world} greeting is still lowercase.
\end{answer}


\Q \label{errorA} In Program A, what is returned by the string method?
What happens to the return value?

\begin{answer}
A new string is returned, but its value is not saved anywhere.
\end{answer}


\Q Describe two different ways you can fix the logic error in \ref{errorA}.

\begin{answer}
\vspace{-1ex}
\begin{javaans}
greeting = greeting.toUpperCase();    // or just combine the two lines
System.out.println(greeting);         System.out.println(greeting.toUpperCase());
\end{javaans}
\end{answer}


%\Q In general, what happens to \java{this} string when calling the methods in \ref{string-methods}?
%
%\begin{answer}
%It is passed as the implicit first argument, but nothing happens to {\tt this} because strings cannot be modified.
%\end{answer}


\Q \label{errorB} In what cases will Program B throw an exception? What is the error message displayed?

\begin{answer}
If the user enters a blank line, then there will be no character at position 1. It will show the out of bounds exception and display the stack trace.
\end{answer}


\Q Describe two different ways you can fix the run-time error in \ref{errorB}.

\begin{answer}[3em]
1. Check if the string is long enough: ~{\tt if (line.length >= 2)} \\
2. Keep asking for input until valid: ~{\tt do \{~...~\} while (line.length < 2);}
\end{answer}
